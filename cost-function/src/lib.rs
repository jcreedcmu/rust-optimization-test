#![allow(non_upper_case_globals)]

const x1: [f64; 13] = [
    470., 285., 470., 470., 470., 100., 100., 470., 100., 100., 100., 285., 285.,
];

const x2: [f64; 13] = [
    300., 80., 300., 80., 80., 190., 80., 190., 300., 300., 80., 300., 190.,
];

const x3: [f64; 13] = [
    10., 10., 120., 120., 10., 10., 65., 65., 54., 120., 120., 10., 120.,
];

const rate: [f64; 13] = [
    8.55, 3.79, 4.82, 0.02, 2.75, 14.39, 2.54, 4.35, 13., 8.5, 0.05, 11.32, 3.13,
];

#[no_mangle]
pub extern "C" fn cost_function(_nd: i32, x: &[f64; 5], _data: usize) -> f64 {
    let mut s: f64 = 0.;
    for i in 0..13 {
        let v = (x[0] * x2[i] - x3[i] / x[4]) / (1.0 + x[1] * x1[i] + x[2] * x2[i] + x[3] * x3[i]);
        let d = rate[i] - v;
        s += d * d;
    }
    s
}
